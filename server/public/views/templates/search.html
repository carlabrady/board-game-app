<div ng-include="'views/partials/nav.html'"></div>
<div class="container" layout-align="center center">
    <h1 id="welcome" class="md-display-1">Welcome, {{vm.userObject.userName}}!</h1> 
</div>
<div>
    <md-content>
        <md-card>
          <md-tabs md-dynamic-height md-border-bottom>
            <md-tab label="Title">
              <md-content class="md-padding">
                <h1 class="md-display-1">Search by Title</h1>
                <input type='text' placeholder="game search" ng-model="vm.gameIn">
                <button ng-click="vm.getGame(vm.gameIn)">Search</a></button>
              </md-content>
            </md-tab>
            <md-tab label="#Players">
              <md-content class="md-padding">
                <h1 class="md-display-1">Select Number of Players</h1>
                    <div layout="row">
                        <md-input-container style="margin-right: 10px;">
                          <label>Players</label>
                          <md-select ng-model="vm.playerCount">
                            <md-option ng-repeat="number in vm.players" value="{{number}}">{{number}}</md-option>
                          </md-select>
                        </md-input-container>
                    </div>
                <button ng-click="vm.playerSearch(vm.playerCount)">Search</button>
              </md-content>
            </md-tab>
            <md-tab label="Categories">
              <md-content class="md-padding">
                <h1 class="md-display-1">Categories</h1>
                <!-- add functionality to search by genre -->
                <md-card-actions layout="row" layout-align="center center">
                    <div layout="row" layout-wrap flex>
                        <div flex-gt-sm="25" ng-repeat="item in vm.items" class="md-padding">
                            <md-checkbox ng-checked="vm.exists(item, vm.selected)" ng-click="vm.toggle(item, vm.selected)">
                                {{ item }}
                            </md-checkbox>
                        </div>
                    </div>
                </md-card-actions>
                <button ng-click="vm.searchGenre(vm.selected)">Search</a></button>                                    
              </md-content>
            </md-tab>
          </md-tabs>
        </md-card>
    </md-content>
    </div>
    <section>
        <div ng-if="vm.games.length === 0" class="md-padding" layout-align="center center"> 
            <h1>No results, please try again!</h1>
        </div>
        <md-content class="md-padding">
            <div layout="row" layout-wrap>
                <md-card flex-xs flex="30" ng-repeat="info in vm.shownItems" class="gameCard">
                    <md-card-title>
                        <md-card-title-text>
                            <span class="md-headline">{{ info.names }}</span>
                            <div class="star-ratings-css">
                                <div class="star-ratings-css-top" style="width: {{info.avg_rating}}%"><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>
                                <div class="star-ratings-css-bottom"><span>★</span><span>★</span><span>★</span><span>★</span><span>★</span></div>
                            </div>
                            <span class="md-subhead">Rating: {{info.avg_rating}}/100</span>
                        </md-card-title-text>
                    </md-card-title>
                    <img ng-src="{{info.image_url}}" class="md-card-image" layout-align="top" alt="Washed Out">
                    <md-card-content layout="column" layout-align="left">
                        <p ng-show="{{info.min_players}} != {{info.max_players}}">Number of Players: {{info.min_players}} to {{info.max_players}}</p>
                        <p ng-show="{{info.min_players}} === {{info.max_players}}">Number of Players: {{info.min_players}}</p>                        
                        <p>Category: {{info.category}}</p>
                    </md-card-content>
                    <md-card-actions layout="row" layout-align="end center">
                        <div flex-gt-sm="50">
                            <md-checkbox ng-model="$index" ng-checked={{info.owned}} ng-click="vm.updateUserCollection(info.id)" aria-label="Checkbox 1">
                                In My Collection
                            </md-checkbox>
                            <md-checkbox ng-model="$indexSecondary" ng-checked={{info.wants}} ng-click="vm.updateUserWants(info.id)" aria-label="Checkbox 2">
                                Add to Wishlist
                            </md-checkbox>
                        </div>
                    </md-card-actions>
                </md-card>
            </div>
        </md-content>
    </section>
    <md-collection-pagination class="md-padding" collection="vm.games" paginated-collection="vm.shownItems" per-page="9"></md-collection-pagination>
</div>